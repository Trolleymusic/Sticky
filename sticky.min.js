// Sticky
// http://github.com/Trolleymusic/Sticky
;(function(e){e.fn.Sticky=function(t){var n=function(t,n){var r,i,s,o,u;this.Init=function(t,n){var u,a,f,l,c,h,p,d,v,m,g,y,b;if(!t||!t.length){return}r=t;n=n||{};u=Modernizr.csstransitions?0:n.animate||0;a=n.bottom||false;f=n.breakpoint||720;l=n.buffer||0;c=n.dimensions||false;h=n.justmark||false;p=n.keyword||"stuck";d=n.onupdate||function(){};v=n.reference||null;m=n.touch||true;if(u){u={duration:u,children:true};console.log(u)}this.CalculateOffsets(l,v);o=false;g=r.parent().height()+parseInt(r.parent().css("padding-top")||0)-parseInt(r.parent().css("padding-bottom")||0);if(!h){r.parent().css("height",g+"px")}y=n.bottom?function(){var t,n;t=e(this).scrollTop();n=(document.width||document.body.clientWidth)>=f;if(t>=i&&t<=s&&!o&&n){if(c){r.css({width:r.width(),height:r.height()})}r.addClass(p,u).removeClass("bottom",u);o=true;r.attr("data-stuck","fixed").css({top:""});d.apply(this)}else if(t<i&&o||!n){r.removeClass(p,u);o=false;r.removeAttr("data-stuck").css({top:""});if(c){r.css({width:"",height:""})}d.apply(this)}else if(t>s&&o&&f){r.removeClass(p,u).addClass("bottom",u);o=false;r.attr("data-stuck","bottom").css({top:s-r.offsetParent().offset().top});d.apply(this)}}:function(){var t=(document.width||document.body.clientWidth)>=f;if(e(this).scrollTop()>=i&&!o&&t){if(c){r.css({width:r.width(),height:r.height()})}r.addClass(p,u);o=true;d.apply(this)}else if(e(this).scrollTop()<i&&o||!t){if(c){r.css({width:"",height:""})}r.removeClass(p,u);o=false;d.apply(this)}};if(Modernizr.touch&&m){document.addEventListener("touchmove",y,false);document.addEventListener("touchend",function(){requestAnimationFrame(y)},false);document.addEventListener("onscroll",function(){requestAnimationFrame(y)},false)}else{e(window).on("scroll",y)}b=this;e(window).on("resize",function(){b.CalculateOffsets(l,v);y()});y()};this.CalculateOffsets=function(e,t,n){if(!n){i=r.offset().top-e}s=i+r.height();if(t&&t.length&&t.height()){s=t.height()+t.offset().top-r.height()}u=[e,t]};this.ForceCalculateOffsets=function(e){if(!u){return false}this.CalculateOffsets(u[0],u[1],e);return true};this.GetStickyPadding=function(){return r.height()};this.IncludeStickyPadding=function(e){return e-this.GetStickyPadding()};this.Init(t,n);return this};return new n(this,t)}})(jQuery);