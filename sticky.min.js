// Sticky
// http://github.com/Trolleymusic/Sticky
;(function(a){a.fn.Sticky=(function(b){var c=(function(g,j){var e,i,h,d,f;this.Init=function(s,n){var v,q,l,o,r,k,x,m,w,u,t,p;if(!s||!s.length){return}e=s;n=n||{};v=n.keyword||"stuck";q=n.buffer||0;l=n.bottom||false;o=n.reference||null;r=n.touch||true;k=n.dimensions||false;x=n.justmark||false;m=n.onupdate||function(){};w=n.breakpoint||720;this.CalculateOffsets(q,o);d=false;u=e.parent().height()+parseInt(e.parent().css("padding-top")||0)-parseInt(e.parent().css("padding-bottom")||0);if(!x){e.parent().css("height",u+"px")}t=n.bottom?function(){var y,z;y=a(this).scrollTop();z=(document.width||document.body.clientWidth)>=w;if(((y>=i&&y<=h)&&!d)&&z){if(k){e.css({width:e.width(),height:e.height()})}e.addClass(v).removeClass("bottom");d=true;e.attr("data-stuck","fixed").css({top:""});m.apply(this)}else{if((y<i&&d)||!z){e.removeClass(v);d=false;e.removeAttr("data-stuck").css({top:""});if(k){e.css({width:"",height:""})}m.apply(this)}else{if((y>h&&d)&&w){e.removeClass(v).addClass("bottom");d=false;e.attr("data-stuck","bottom").css({top:h-e.offsetParent().offset().top});m.apply(this)}}}}:function(){var y=(document.width||document.body.clientWidth)>=w;if(a(this).scrollTop()>=i&&!d&&y){if(k){e.css({width:e.width(),height:e.height()})}e.addClass(v);d=true;m.apply(this)}else{if((a(this).scrollTop()<i&&d)||!y){if(k){e.css({width:"",height:""})}e.removeClass(v);d=false;m.apply(this)}}};if(Modernizr.touch&&r){document.addEventListener("touchmove",t,false);document.addEventListener("touchend",function(){requestAnimationFrame(t)},false);document.addEventListener("onscroll",function(){requestAnimationFrame(t)},false)}else{a(window).on("scroll",t)}p=this;a(window).on("resize",function(){p.CalculateOffsets(q,o);t()});t()};this.CalculateOffsets=function(m,k,l){if(!l){i=e.offset().top-m}h=i+e.height();if(k&&k.length&&k.height()){h=k.height()+k.offset().top-e.height()}f=[m,k]};this.ForceCalculateOffsets=function(k){if(!f){return false}this.CalculateOffsets(f[0],f[1],k);return true};this.GetStickyPadding=function(){return e.height()};this.IncludeStickyPadding=function(k){return k-this.GetStickyPadding()};this.Init(g,j);return this});return new c(this,b)})})(jQuery);